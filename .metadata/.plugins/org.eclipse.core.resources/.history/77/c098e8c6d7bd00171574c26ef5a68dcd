package br.com.java.stacks;

import java.util.Scanner;
import java.util.Stack;

public class MaximumElement2 {
	class Values {
		public int value;
		public int maxValue;
	}

	public static void main(String[] args) {
		Stack<Values> stack = new Stack<>();

		Scanner scan = new Scanner(System.in);
		int nQueries = scan.nextInt();
		int maxValue = 0;
		for (int x = 0; x < nQueries; x++) {
			Integer m = scan.nextInt();
			Integer operation = 0;
			Integer value = 0;
			operation = m;
			if (m.equals(1))
				value = scan.nextInt();

			maxValue = process(operation, value, stack, maxValue);

		}
		scan.close();
	}

	private static int process(Integer operation, Integer value, Stack<Values> stack, Integer maxValue) {

		switch (operation) {
		case 1:
			Values values = new Values();
			values.value = value;
			values.maxValue = values.maxValue > maxValue ? values.maxValue : maxValue;
			stack.push(values);
			break;
		case 2:
			stack.pop();
			maxValue =stack.peek().maxValue;
			break;
		case 3:
			System.out.println(stack.peek().maxValue);
			break;
		}
		return maxValue;
	}

}
